(function(){"use strict";var e={5252:function(e,t,n){var o=n(9242),a=n(1020),s=n(3396),l=n(7139);const r={class:"navbar navbar-expand-md bg-body-tertiary"},i={class:"container-fluid"},u=(0,s._)("a",{class:"navbar-brand"},"FundMosque",-1),d=(0,s._)("span",{class:"navbar-toggler-icon"},null,-1),c=[d],m={class:"navbar-nav mx-auto"};function h(e,t,n,o,a,d){const h=(0,s.up)("router-link"),b=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",r,[(0,s._)("div",i,[u,(0,s._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:t[0]||(t[0]=(...e)=>o.toggleNavbar&&o.toggleNavbar(...e))},c),(0,s._)("div",{class:(0,l.C_)(["collapse navbar-collapse",{show:o.isNavbarOpen}]),id:"navbarSupportedContent"},[(0,s._)("div",m,[(0,s.Wm)(h,{onClick:o.closeNavbar,to:"/",class:"nav-item nav-link"},{default:(0,s.w5)((()=>[(0,s.Uk)("Home")])),_:1},8,["onClick"]),o.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(h,{key:0,onClick:o.closeNavbar,class:"nav-item nav-link",to:"/makeDonation"},{default:(0,s.w5)((()=>[(0,s.Uk)("Make a Donation")])),_:1},8,["onClick"])):(0,s.kq)("",!0),o.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(h,{key:1,onClick:o.closeNavbar,class:"nav-item nav-link",to:"/profile"},{default:(0,s.w5)((()=>[(0,s.Uk)("View Profile")])),_:1},8,["onClick"])):(0,s.kq)("",!0),o.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(h,{key:2,onClick:o.closeNavbar,class:"nav-item nav-link",to:"/mosquesInfo"},{default:(0,s.w5)((()=>[(0,s.Uk)("View Mosques")])),_:1},8,["onClick"])):(0,s.kq)("",!0),o.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(h,{key:3,onClick:o.closeNavbar,class:"nav-item nav-link",to:"/adminDashboard"},{default:(0,s.w5)((()=>[(0,s.Uk)("Admin Dashboard")])),_:1},8,["onClick"])):(0,s.kq)("",!0),o.user.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(h,{key:4,class:"nav-item nav-link",to:"/register",onClick:o.closeNavbar},{default:(0,s.w5)((()=>[(0,s.Uk)("Register")])),_:1},8,["onClick"])),o.user.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(h,{key:5,class:"nav-item nav-link",to:"login",onClick:o.closeNavbar},{default:(0,s.w5)((()=>[(0,s.Uk)("Login")])),_:1},8,["onClick"]))]),(0,s._)("button",{class:"btn btn-secondary",id:"darkModeButton",onClick:t[1]||(t[1]=(...e)=>o.toggleTheme&&o.toggleTheme(...e))},(0,l.zw)("dark"===o.theme?"Light Mode":"Dark Mode"),1)],2)])]),(0,s.Wm)(b)],64)}var b=n(4870),_=(n(560),n(2483));const p=(0,s._)("h1",null,"Donate",-1),g=(0,s._)("p",null,[(0,s.Uk)("Fill in the form below to make a donation "),(0,s._)("br"),(0,s.Uk)(" We thank you for your generosity!")],-1),f={class:"mb-3"},w=(0,s._)("label",{for:"amount"},"Amount",-1),v={class:"mb-3"},y=(0,s._)("label",{for:"mosque"},"Mosque",-1),k=(0,s._)("option",{value:"",disabled:"",selected:""},"Click here to select a mosque",-1),q=["value"],D=(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function M(e,t,n,a,r,i){return(0,s.wg)(),(0,s.iD)(s.HY,null,[p,g,(0,s._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.submitDonation&&i.submitDonation(...e)),["prevent"]))},[(0,s._)("div",f,[w,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",id:"amount","aria-describedby":"amount","onUpdate:modelValue":t[0]||(t[0]=e=>r.amount=e),placeholder:"Enter Amount in Â£ here"},null,512),[[o.nr,r.amount]])]),(0,s._)("div",v,[y,(0,s.wy)((0,s._)("select",{id:"mosque",name:"mosque","onUpdate:modelValue":t[1]||(t[1]=e=>r.mosque=e),class:"form-control",required:""},[k,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.mosques,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e._id,value:e._id},(0,l.zw)(e.name),9,q)))),128))],512),[[o.bM,r.mosque]])]),D],32)],64)}var U={name:"DonationForm",data(){return{amount:"",donor:"",mosque:"",users:[],mosques:[]}},created(){fetch("/api/users").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.users=e})).catch((e=>{console.error(e)})),fetch("/api/mosques").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosques=e})).catch((e=>{console.error(e)}))},setup(){const e=Ot();return{user:e}},methods:{submitDonation(){const e={amount:this.amount,donor:this.user._id,mosque:this.mosque};fetch("/api/donations",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(e)}).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((()=>{alert("Donation successful"),Nt.push("/")})).catch((e=>{console.error(e),alert("Donation failed")}))}}},C=n(89);const j=(0,C.Z)(U,[["render",M]]);var I=j;const S={class:"home"},L=(0,s._)("h1",null,"Welcome to FundMosque!",-1),z={key:0},N={class:"logout"},O={key:0},x={key:0};function E(e,t,n,o,a,r){const i=(0,s.up)("DonationList");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",S,[L,o.user.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",z,"Please sign up or log in to continue."))]),(0,s._)("div",null,[(0,s._)("div",N,[o.user.isLoggedIn?((0,s.wg)(),(0,s.iD)("p",O,"You are logged in as "+(0,l.zw)(o.user.username),1)):(0,s.kq)("",!0),o.user.isLoggedIn?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>o.user.logout&&o.user.logout(...e))},"Log Out")):(0,s.kq)("",!0)])]),o.user.isLoggedIn?((0,s.wg)(),(0,s.iD)("div",x,[(0,s.Wm)(i)])):(0,s.kq)("",!0)],64)}const P=e=>((0,s.dD)("data-v-7bff4c92"),e=e(),(0,s.Cn)(),e),T={class:"donation-list"},H=P((()=>(0,s._)("h1",null,"Recent Donations",-1))),A={class:"table"},Y=P((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Donor"),(0,s._)("th",null,"Mosque")])],-1)));function F(e,t,n,o,a,r){return(0,s.wg)(),(0,s.iD)("div",T,[H,(0,s._)("table",A,[Y,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.donations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.donor.name),1),(0,s._)("td",null,(0,l.zw)(e.mosque.name),1)])))),128))])])])}var V={name:"DonationList",data(){return{donations:[]}},created(){fetch("/api/donations").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.donations=e,this.donations.reverse(),this.donations=this.donations.slice(0,3)})).catch((e=>{console.error(e)}))}};const Z=(0,C.Z)(V,[["render",F],["__scopeId","data-v-7bff4c92"]]);var K=Z,W={name:"HomePage",components:{DonationList:K},setup(){const e=Ot();return{user:e}}};const J=(0,C.Z)(W,[["render",E]]);var R=J;const $=(0,s._)("h1",null,"Register",-1),B={class:"mb-3"},G=(0,s._)("label",{for:"username",class:"form-label"},"Username",-1),Q={class:"mb-3"},X=(0,s._)("label",{for:"name",class:"form-label"},"Full Name",-1),ee={class:"mb-3"},te=(0,s._)("label",{for:"email",class:"form-label"},"Email address",-1),ne={class:"mb-3"},oe=(0,s._)("label",{for:"password",class:"form-label"},"Password",-1),ae=(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Register",-1);function se(e,t,n,a,l,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[$,(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,o.iM)(((...e)=>r.register&&r.register(...e)),["prevent"])),class:"register-form"},[(0,s._)("div",B,[G,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),type:"text",required:""},null,512),[[o.nr,l.username]])]),(0,s._)("div",Q,[X,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),type:"text",required:""},null,512),[[o.nr,l.name]])]),(0,s._)("div",ee,[te,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>l.email=e),type:"email",required:""},null,512),[[o.nr,l.email]])]),(0,s._)("div",ne,[oe,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>l.password=e),type:"password",required:""},null,512),[[o.nr,l.password]])]),ae],32)],64)}var le={data(){return{username:"",name:"",email:"",password:""}},methods:{async register(){try{const e=await fetch("/api/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,name:this.name,email:this.email,password:this.password})}),t=await e.json();t.success?(this.$router.push("/"),alert("Registration successful")):alert("uh oh, try again!")}catch(e){console.log(e),alert("Registration failed")}}}};const re=(0,C.Z)(le,[["render",se]]);var ie=re;const ue={class:"login"},de=(0,s._)("h1",null,"Login",-1),ce={class:"mb-3"},me=(0,s._)("label",{class:"form-label",for:"username"},"Username",-1),he={class:"mb-3"},be=(0,s._)("label",{class:"form-label",for:"password"},"Password",-1),_e=(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Login",-1);function pe(e,t,n,a,l,r){return(0,s.wg)(),(0,s.iD)("div",ue,[de,(0,s._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"login-form"},[(0,s._)("div",ce,[me,(0,s.wy)((0,s._)("input",{id:"username",class:"form-control",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.userStore.username=e),required:""},null,512),[[o.nr,a.userStore.username]])]),(0,s._)("div",he,[be,(0,s.wy)((0,s._)("input",{id:"password",class:"form-control",type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.userStore.password=e),required:""},null,512),[[o.nr,a.userStore.password]])]),_e],32)])}var ge={name:"LoginPage",setup(){const e=Ot();return{userStore:e}},methods:{login(){this.userStore.login(),this.userStore.username="",this.userStore.password=""}}};const fe=(0,C.Z)(ge,[["render",pe]]);var we=fe;const ve=(0,s._)("h1",null,"Profile",-1),ye=(0,s._)("p",null,[(0,s.Uk)(" Below are the details stored by FundMosque for this account. "),(0,s._)("br"),(0,s.Uk)(" Click the update button to update your details ")],-1),ke=(0,s._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Update ",-1),qe={class:"donation-table"},De={class:"table"},Me=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Mosque")])],-1),Ue={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ce={class:"modal-dialog"},je={class:"modal-content"},Ie=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Update user info here "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Se={class:"modal-body"},Le={class:"mb-3"},ze=(0,s._)("label",{for:"username",class:"form-label"},"Username (cannot be changed)",-1),Ne={class:"mb-3"},Oe=(0,s._)("label",{for:"name",class:"form-label"},"Full Name",-1),xe={class:"mb-3"},Ee=(0,s._)("label",{for:"email",class:"form-label"},"Email address",-1),Pe=(0,s._)("button",{class:"btn btn-primary",type:"submit","data-bs-dismiss":"modal"}," Update ",-1);function Te(e,t,n,a,r,i){return(0,s.wg)(),(0,s.iD)(s.HY,null,[ve,ye,(0,s._)("h3",null,"Name: "+(0,l.zw)(a.user.name),1),(0,s._)("h3",null,"Username: "+(0,l.zw)(a.user.username),1),(0,s._)("h3",null,"Email: "+(0,l.zw)(a.user.email),1),ke,(0,s._)("div",qe,[(0,s._)("table",De,[Me,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.donations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.mosque.name),1)])))),128))])])]),(0,s._)("div",Ue,[(0,s._)("div",Ce,[(0,s._)("div",je,[Ie,(0,s._)("div",Se,[(0,s._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)((e=>i.update(a.user._id)),["prevent"])),class:"register-form"},[(0,s._)("div",Le,[ze,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>a.user.username=e),type:"text",disabled:"",required:""},null,512),[[o.nr,a.user.username]])]),(0,s._)("div",Ne,[Oe,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>a.user.name=e),type:"text",required:""},null,512),[[o.nr,a.user.name]])]),(0,s._)("div",xe,[Ee,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>a.user.email=e),type:"email",required:""},null,512),[[o.nr,a.user.email]])]),Pe],32)])])])])],64)}var He={name:"ProfilePage",setup(){const e=Ot();return{user:e}},data(){return{donations:[]}},created(){fetch(`/api/userDonations/${this.user._id}`).then((e=>{if(e.ok)return e.json()})).then((e=>{this.donations=e}))},methods:{async update(e){fetch(`/api/users/${e}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.user)}).then((e=>{if(!e.ok)throw e;return e.json()})).then((e=>{if(!e.success)throw new Error(e.message||"Failed to update user");alert("User updated successfully!")})).catch((e=>{alert(`uh oh, theres a problem\n${e.status}: ${e.statusText}`)}))}}};const Ae=(0,C.Z)(He,[["render",Te]]);var Ye=Ae;const Fe={class:"mosque-list"},Ve=(0,s._)("h1",null,"Mosques",-1),Ze=(0,s._)("p",null,[(0,s.Uk)(" Below are the mosques registered with FundMosque."),(0,s._)("br"),(0,s.Uk)(" Click More Info to find out more ")],-1),Ke={class:"table"},We=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Mosque Name"),(0,s._)("th",null,"Mosque Address"),(0,s._)("th",null,"Action")])],-1),Je=["onClick"],Re={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$e={class:"modal-dialog modal-dialog-scrollable"},Be={class:"modal-content"},Ge=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"More information about: "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},Xe={class:"table"},et=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Donor")])],-1),tt=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function nt(e,t,n,o,a,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Fe,[Ve,Ze,(0,s._)("table",Ke,[We,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.mosques,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.name),1),(0,s._)("td",null,(0,l.zw)(e.address),1),(0,s._)("td",null,[(0,s._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:t=>r.mosqueMoreInfo(e._id,e.name)}," More Info ",8,Je)])])))),128))])])]),(0,s._)("div",Re,[(0,s._)("div",$e,[(0,s._)("div",Be,[Ge,(0,s._)("div",Qe,[(0,s._)("h2",null,(0,l.zw)(this.selectedMosque),1),(0,s._)("p",null,"The total donations since joining FundMosque for "+(0,l.zw)(a.selectedMosque)+" is: Â£"+(0,l.zw)(a.totalMosqueDonations)+"!",1),(0,s._)("table",Xe,[et,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.mosqueDonations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.donor.name),1)])))),128))])])]),tt])])])],64)}var ot={name:"MosquesPage",data(){return{mosques:[],selectedMosque:"",mosqueDonations:[],totalMosqueDonations:0}},mounted(){fetch("/api/mosques/").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosques=e})).catch((e=>{console.error(e)}))},methods:{mosqueMoreInfo(e,t){this.selectedMosque=t,fetch(`/api/mosqueAllDonations/${e}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosqueDonations=e,this.totalMosqueDonations=0;for(let t=0;t<this.mosqueDonations.length;t++)this.totalMosqueDonations+=this.mosqueDonations[t].amount})).catch((e=>{console.error(e)}))}}};const at=(0,C.Z)(ot,[["render",nt]]);var st=at;const lt={class:"users-table"},rt=(0,s._)("h1",null,"Admin Dashboard",-1),it=(0,s._)("h2",null,"Users",-1),ut={class:"table-responsive"},dt={class:"table"},ct=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"ID"),(0,s._)("th",null,"Username"),(0,s._)("th",null,"Full Name"),(0,s._)("th",null,"Email")])],-1),mt=(0,s._)("h2",null,"Mosques",-1),ht={class:"table-responsive"},bt={class:"table"},_t=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"ID"),(0,s._)("th",null,"Name"),(0,s._)("th",null,"Address"),(0,s._)("th",null,"Contact")])],-1),pt=(0,s._)("h2",null,"Donations",-1),gt={class:"table-responsive"},ft={class:"table"},wt=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"ID"),(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Donor Name"),(0,s._)("th",null,"Mosque")])],-1);function vt(e,t,n,o,a,r){return(0,s.wg)(),(0,s.iD)("div",lt,[rt,it,(0,s._)("div",ut,[(0,s._)("table",dt,[ct,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.users,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e._id),1),(0,s._)("td",null,(0,l.zw)(e.username),1),(0,s._)("td",null,(0,l.zw)(e.name),1),(0,s._)("td",null,(0,l.zw)(e.email),1)])))),128))])])]),mt,(0,s._)("div",ht,[(0,s._)("table",bt,[_t,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.mosques,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e._id),1),(0,s._)("td",null,(0,l.zw)(e.name),1),(0,s._)("td",null,(0,l.zw)(e.address),1),(0,s._)("td",null,(0,l.zw)(e.contact),1)])))),128))])])]),pt,(0,s._)("div",gt,[(0,s._)("table",ft,[wt,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.donations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e._id),1),(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.donor.name),1),(0,s._)("td",null,(0,l.zw)(e.mosque.name),1)])))),128))])])])])}var yt={name:"AdminDashboard",data(){return{users:[],mosques:[],donations:[]}},created(){fetch("/api/users").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.users=e})).catch((e=>{console.error(e)})),fetch("/api/mosques").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosques=e})).catch((e=>{console.error(e)})),fetch("/api/donations").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.donations=e})).catch((e=>{console.error(e)}))}};const kt=(0,C.Z)(yt,[["render",vt]]);var qt=kt;const Dt=(0,s._)("h1",null,"Uh Oh",-1),Mt=(0,s._)("h2",null,"Looks like that page doesn't exist!",-1),Ut=(0,s._)("p",null,"Navigate back to home to try again",-1);function Ct(e,t){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Dt,Mt,Ut],64)}const jt={},It=(0,C.Z)(jt,[["render",Ct]]);var St=It;const Lt=[{path:"/",name:"home",component:R},{path:"/makeDonation",name:"donationForm",component:I,beforeEnter:(e,t,n)=>{const o=Ot();o.isLoggedIn?n():n({name:"home"})}},{path:"/profile",name:"profile",component:Ye,beforeEnter:(e,t,n)=>{const o=Ot();o.isLoggedIn?n():n({name:"home"})}},{path:"/mosquesInfo",name:"mosquesInfo",component:st,beforeEnter:(e,t,n)=>{const o=Ot();o.isAdmin?n():n({name:"home"})}},{path:"/adminDashboard",name:"adminDashboard",component:qt,beforeEnter:(e,t,n)=>{const o=Ot();o.isAdmin?n():n({name:"home"})}},{path:"/register",name:"register",component:ie},{path:"/login",name:"login",component:we},{path:"/:catchAll(.*)",component:St}],zt=(0,_.p7)({history:(0,_.PO)("/"),routes:Lt});var Nt=zt;const Ot=(0,a.Q_)("user",{state:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):{_id:0,username:"",name:"",email:"",password:"",isLoggedIn:!1}},actions:{async loggedIn(){try{const e=await fetch("/api/loggedIn",{method:"GET",credentials:"include"}),t=await e.json();t.success?(this._id=t._id,this.isLoggedIn=!0,this.username=t.username,this.name=t.name,this.email=t.email):this.isLoggedIn=!1}catch(e){console.log(e)}},async logout(){const e=await fetch("/api/logout",{method:"GET",credentials:"include"}),t=await e.json();t.success&&(this._id=0,this.username="",this.name="",this.email="",this.password="",this.isLoggedIn=!1)},async login(){try{const e=await fetch("/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})});if(401===e.status)alert("Wrong Username or Password"),Nt.push("/login");else{const t=await e.json();t.success&&(alert("Login successful"),this._id=t._id,this.username=t.username,this.name=t.name,this.email=t.email,this.loggedIn(),Nt.push("/"))}}catch(e){console.log(e)}}}});var xt={setup(){const e=Ot(),t=(0,b.iH)(!1),n=(0,b.iH)(""),o=()=>{t.value=!t.value},a=()=>{t.value=!1},l=()=>{n.value="dark"===n.value?"light":"dark",localStorage.setItem("theme",n.value),r()},r=()=>{const e="dark"===n.value?"dark":"light";document.body.setAttribute("data-bs-theme",e)};return(0,s.bv)((()=>{e.loggedIn(),n.value=localStorage.getItem("theme")||"dark",r()})),{user:e,isNavbarOpen:t,theme:n,toggleNavbar:o,closeNavbar:a,toggleTheme:l}}};const Et=(0,C.Z)(xt,[["render",h]]);var Pt=Et;n(2166);const Tt=(0,a.WB)();(0,o.ri)(Pt).use(Nt).use(Tt).mount("#app");const Ht=Ot();(0,s.YP)(Ht,(e=>{localStorage.setItem("user",JSON.stringify(e))}),{deep:!0})}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,s){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],s=e[d][2];for(var r=!0,i=0;i<o.length;i++)(!1&s||l>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(r=!1,s<l&&(l=s));if(r){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,a,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,s,l=o[0],r=o[1],i=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(i)var d=i(n)}for(t&&t(o);u<l.length;u++)s=l[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5252)}));o=n.O(o)})();
//# sourceMappingURL=app.2c64c6b3.js.map